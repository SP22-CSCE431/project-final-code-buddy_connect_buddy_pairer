<head>
<%= stylesheet_link_tag 'forum'%>
</head>
<body>

<nav class="navbar navbar-dark bg-primary"> 
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <h1 style="color: white;">BuddyConnect Forum</h1> 
    <%= link_to "Sign Out", destroy_user_session_path, class:"text-light btn btn-outline-light"%>
  </div>
</nav>
<div class="collapse" id="navbarToggleExternalContent">
  <div class="bg-primary p-4">
    <span class="text-white h4 center">
        <ul class="navbar-nav text-center">
            <%= link_to 'Profile', user_path(current_user.studentId), class:"text-light btn btn-primary btn-lg btn-block" %>
            <% if current_user.groupId.present? %>
                <%= link_to 'Group', group_path(current_user.groupId), class:"text-light btn btn-primary btn-lg btn-block" %>
            <% end %>
            <%= link_to 'Forum', posts_path, class:"text-light btn btn-primary btn-lg btn-block" %>
            <% if current_user.isAdmin || current_user.isOfficer%>
              <%= link_to 'All Users', users_path, class:"text-light btn btn-primary btn-lg btn-block" %>
              <%= link_to 'All groups', groups_path, class:"text-light btn btn-primary btn-lg btn-block" %>
              <%= link_to 'All interests', interests_path, class:"text-light btn btn-primary btn-lg btn-block" %>
            <% end %>
        </ul>
    </span>
  </div>
</div>
<p id="notice"><%= notice %></p>
<div class = "full-container">
  <div class = "add-new-post">
    <h3 class = "title">Add New Post</h3>
      <div class = "form-container">
        <%= form_with model: @post do |form|%>
          <div class="field">
            <%= form.text_field :title, :class => 'title-area', placeholder: "Post Summary/Title" %>
          </div>
          <div class="field">
            <%= form.text_area :body, :class => 'text-area', rows: 10, placeholder: "Type here..." %>
          </div>
        <div class = "actions">
          <%= form.submit "Create Post" %>
        </div>
        <%end%>
      </div>
  </div>


<!--
<div class="container">
  <table class="table table-striped">
  <thead>
        <tr>
          <th>Title</th>
          <th>Content</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
      <% @posts.each do |post| %>
        <tr>
          <td><%= post.title %></td>
          <td><%= post.body %></td>
          <td> --- </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

-->


<div class = "forum-container">
  <h1 class = "title">Discussion Board</h1>

    <% @posts.each do |post| %>
      <div class = "post">
        <td><%= link_to post.title, post, class: "post-title" %></td>
        </br>
        <td><%= post.body %></td>
        </br>
        </br>
        <td>Posted by <%=User.where(studentId: post.posterId).first ? User.where(studentId: post.posterId).first.fullName : "None" %></td>
        <td><%= time_ago_in_words (post.created_at) %> ago</td>
        <%if current_user.isAdmin%>
          <td><%= link_to 'Edit', edit_post_path(post) %></td>
          <td><%= button_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <%end%>
      </div>
    <% end %>
</div>

<!--<%= link_to 'Profile', user_path(current_user.studentId) %> -->

</div>

</body>
